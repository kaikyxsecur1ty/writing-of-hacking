<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog Pessoal [hacker-style]</title>
    <!-- 
      Estilo "Hacker Terminal"
      - Fundo preto (#000)
      - Texto azul-ciano (#00ffff)
      - Fonte monoespaçada (Consolas, Courier New)
    -->
    <style>
        body {
            background-color: #000;
            color: #00ffff; /* Azul-Ciano */
            font-family: "Consolas", "Courier New", monospace;
            font-size: 16px;
            line-height: 1.6;
            margin: 0;
            padding: 2em;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            border: 1px solid #00ffff; /* Borda azul-ciano */
            padding: 1.5em;
            box-shadow: 0 0 15px rgba(0, 255, 255, 0.3); /* Efeito "glow" sutil */
        }

        /* Usamos <pre> para arte ASCII para preservar a formatação */
        pre {
            font-size: 14px;
            white-space: pre;
            margin-bottom: 2em;
            color: #00aaaa; /* Um azul-ciano um pouco mais escuro para o ASCII */
        }

        h1, h2, h3, h4 {
            color: #00ffff;
            border-bottom: 1px dashed #00ffff;
            padding-bottom: 5px;
        }

        h1 {
            font-size: 2.5em;
            margin-top: 0;
        }

        /* Links */
        a {
            color: #ffffff; /* Links em branco para destacar */
            text-decoration: none;
            border-bottom: 1px dotted #ffffff;
        }

        a:hover {
            color: #00ffff;
            background-color: #ffffff;
            text-decoration: none;
        }

        /* Navegação */
        nav {
            margin-bottom: 2em;
            font-size: 1.2em;
        }

        nav a {
            margin-right: 15px;
            border: 1px solid #00ffff;
            padding: 5px 10px;
        }
        
        nav a:hover {
            background-color: #00ffff;
            color: #000;
        }

        /* Posts do Blog */
        .post {
            margin-bottom: 3em;
            border-left: 3px solid #00ffff;
            padding-left: 15px;
        }
        
        .post-content h2, .post-content h3, .post-content h4 {
            margin-top: 1.5em;
        }

        .post-meta {
            font-size: 0.9em;
            color: #00aaaa; /* Azul-ciano mais escuro para metadados */
            font-style: italic;
        }
        
        /* Estilos para código dentro dos posts */
        .post-content pre {
            background-color: #111;
            border: 1px solid #00aaaa;
            padding: 1em;
            overflow-x: auto; /* Permite rolar o código horizontalmente */
            color: #eee;
        }
        
        .post-content code {
            font-family: "Consolas", "Courier New", monospace;
            background-color: #111;
            padding: 2px 4px;
            border-radius: 3px;
        }
        
        .post-content pre code {
            padding: 0;
            background-color: transparent;
        }

        /* Rodapé com falso prompt */
        footer {
            margin-top: 3em;
            border-top: 1px dashed #00ffff;
            padding-top: 1em;
            font-size: 1.1em;
        }

        /* Animação do cursor piscando */
        .cursor {
            display: inline-block;
            width: 10px;
            height: 1.2em;
            background-color: #00ffff;
            animation: blink 1s step-end infinite;
            vertical-align: middle;
            margin-left: 5px;
        }

        @keyframes blink {
            from, to {
                background-color: transparent;
            }
            50% {
                background-color: #00ffff;
            }
        }
    </style>
</head>
<body>

    <div class="container">
        
        <!-- Arte ASCII Simples -->
        <pre>
    _   __      _         _            
   / | / /___  (_)___    (_)___  ____ _
  /  |/ / __ \/ / __ \  / / __ \/ __ `/
 / /|  / /_/ / / / / / / / / / / /_/ / 
/_/ |_/\____/_/_/ /_/_/ /_/ /_/\__, /  
                             /____/   
        </pre>

        <header>
            <h1>// KAIKYX_BLOG</h1>
        </header>

        <nav>
            <a href="#posts">[posts]</a>
            <a href="#contato">[contato]</a>
        </nav>

        <main id="post-container">
            <!-- Os posts do GitHub serão carregados aqui -->
            <p>user@host:~$ lendo repositório kaikyxsecur1ty/writing-of-hacking...</p>
        </main>

        <footer id="contato">
            <p>Conecte-se:</p>
            <ul>
                <li>Email: <a href="mailto:seuemail@dominio.com">seuemail@dominio.com</a></li>
                <li>GitHub: <a href="https://github.com/kaikyxsecur1ty">@kaikyxsecur1ty</a></li>
            </ul>
            <p>user@host:~$<span class="cursor"></span></p>
        </footer>

    </div>

    <!-- Biblioteca para converter Markdown (texto do GitHub) em HTML -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <!-- Nosso script para buscar os posts -->
    <script>
        // Configuração do Repositório
        const REPO_USER = 'kaikyxsecur1ty';
        const REPO_NAME = 'writing-of-hacking';
        // IMPORTANTE: Crie uma pasta 'posts' no seu repositório e coloque seus arquivos .md lá
        const POSTS_DIR = 'posts'; 

        const API_URL = `https://api.github.com/repos/${REPO_USER}/${REPO_NAME}/contents/${POSTS_DIR}`;
        const COMMITS_URL = `https://api.github.com/repos/${REPO_USER}/${REPO_NAME}/commits`;
        const container = document.getElementById('post-container');

        // Inicia o carregamento quando a página estiver pronta
        document.addEventListener('DOMContentLoaded', loadPosts);

        async function loadPosts() {
            try {
                // 1. Buscar a lista de arquivos na pasta 'posts'
                const response = await fetch(API_URL);
                if (!response.ok) {
                    throw new Error(`Falha ao buscar o repositório: ${response.statusText}`);
                }
                const files = await response.json();

                // Filtra apenas arquivos .md e verifica se é um array
                const markdownFiles = Array.isArray(files) ? files.filter(file => file.name.endsWith('.md')) : [];
                
                if (markdownFiles.length === 0) {
                    container.innerHTML = `<p>user@host:~$ Nenhum post (.md) encontrado na pasta '${POSTS_DIR}'.</p>`;
                    return;
                }

                // Limpa a mensagem "carregando"
                container.innerHTML = '';

                // 2. Para cada arquivo, buscar seu conteúdo e metadados
                // Ordena os arquivos por nome (ex: 2025-01.md, 2025-02.md)
                for (const file of markdownFiles.sort((a, b) => b.name.localeCompare(a.name))) {
                    
                    // 3. Buscar o conteúdo (Markdown)
                    const mdResponse = await fetch(file.download_url);
                    const markdown = await mdResponse.text();

                    // 4. Buscar o ÚLTIMO commit daquele arquivo (para data e autor)
                    // Isso nos dá a data da "última modificação"
                    const commitsResponse = await fetch(`${COMMITS_URL}?path=${file.path}&per_page=1`);
                    const lastCommit = (await commitsResponse.json())[0];
                    
                    const author = lastCommit.commit.author.name || lastCommit.author.login;
                    const date = new Date(lastCommit.commit.author.date).toLocaleDateString('pt-BR');

                    // 5. Converter o Markdown para HTML
                    const htmlContent = marked.parse(markdown);

                    // 6. Criar e injetar o HTML do post na página
                    const article = document.createElement('article');
                    article.className = 'post';
                    
                    // O 'htmlContent' já deve conter o título (ex: # Meu Título)
                    article.innerHTML = `
                        <p class="post-meta">publicado por: ${author} em: ${date}</p>
                        <div class="post-content">${htmlContent}</div>
                    `;
                    
                    container.appendChild(article);
                }

            } catch (error) {
                console.error('Erro ao carregar posts:', error);
                container.innerHTML = `<p class="post-meta">[ERRO DE SISTEMA]</p><p>Não foi possível carregar os posts do GitHub.</p><p>${error.message}</p>`;
            }
        }
    </script>

</body>
</html>